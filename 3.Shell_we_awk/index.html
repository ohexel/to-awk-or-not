
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://pmitev.github.io/to-awk-or-not/3.Shell_we_awk/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.6">
    
    
      
        <title>3.Shell we awk - To awk or not</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.802231af.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#3shell-we-awk" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="To awk or not" class="md-header__button md-logo" aria-label="To awk or not" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            To awk or not
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              3.Shell we awk
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 10a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2m10-3a5 5 0 0 1 5 5 5 5 0 0 1-5 5H7a5 5 0 0 1-5-5 5 5 0 0 1 5-5h10M7 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3h10a3 3 0 0 0 3-3 3 3 0 0 0-3-3H7z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/pmitev/to-awk-or-not/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="To awk or not" class="md-nav__button md-logo" aria-label="To awk or not" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    To awk or not
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/pmitev/to-awk-or-not/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../1.Simple_example/" class="md-nav__link">
        1.Simple examples
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../2.Teasing_with_grep/" class="md-nav__link">
        2.Teasing with grep
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          3.Shell we awk
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        3.Shell we awk
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#q-ok-i-see-this-and-that-but-really-why-should-i-bother-with-awk" class="md-nav__link">
    Q: OK, I see this and that but really, why should I bother with awk?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#well-coins-countries-anything-else" class="md-nav__link">
    Well, coins, countries - anything else?
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../4.Brief_commands/" class="md-nav__link">
        4.Brief commands
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../5.String_manipulation/" class="md-nav__link">
        5.String manipulation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../6.One_line_programs/" class="md-nav__link">
        6.One line programs
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Python_vs_awk/" class="md-nav__link">
        Python vs. awk
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      <label class="md-nav__link" for="__nav_9">
        Exercises
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Exercises" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Exercises
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Exercises/Exercises/" class="md-nav__link">
        Warming up
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Exercises/01.Simple_arithmetic/" class="md-nav__link">
        01.Simple arithmetic *
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Exercises/02.Data_extraction/" class="md-nav__link">
        02.Data extraction *
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Exercises/03.Data_extraction/" class="md-nav__link">
        03.Data extraction **
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Exercises/04.Data_manipulation/" class="md-nav__link">
        04.Data manipulation **
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Exercises/05.Easy_tricks/" class="md-nav__link">
        05.Easy tricks *
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Exercises/06.Bioinformaticians_corner/" class="md-nav__link">
        06.Bioinformaticians corner *
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Exercises/Advanced_data_analysis/" class="md-nav__link">
        Advanced data analysis ****
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Exercises/Carpool/" class="md-nav__link">
        Carpool ***
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Exercises/Difficult_data/" class="md-nav__link">
        Difficult to extract data ****
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Exercises/Scrubbing/" class="md-nav__link">
        Scrubbing a web page **
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Exercises/String_manipulation/" class="md-nav__link">
        String manipulation **
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Exercises/awk-json/" class="md-nav__link">
        Awk and json **
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Exercises/Linear_regression/" class="md-nav__link">
        Simple linear regresion ***
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Case_studies/List/" class="md-nav__link">
        = Case Studies =
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      <label class="md-nav__link" for="__nav_11">
        More with awk
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="More with awk" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          More with awk
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../More_awk/User_defined_functions/" class="md-nav__link">
        User defined functions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../More_awk/Command_params/" class="md-nav__link">
        Parameters on the command line
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../More_awk/Input_output/" class="md-nav__link">
        Input/Output to external program
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../More_awk/Running_average/" class="md-nav__link">
        Running averages
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Other/Fixed_size_fields/" class="md-nav__link">
        Fixed size fields
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Other/Backreferences/" class="md-nav__link">
        Backreferences
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://www.gnu.org/software/gawk/manual/html_node/Multiple-Line.html" class="md-nav__link">
        Multi-Line records
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../arrays/" class="md-nav__link">
        Awk arrays
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../awk_bash/" class="md-nav__link">
        Awk or Bash
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Other/Localization/" class="md-nav__link">
        Localization problems
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="http://www.thegeekstuff.com/2011/06/awk-nawk-gawk/" class="md-nav__link">
        Awk vs. nawk vs. gawk
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Other/Binder/" class="md-nav__link">
        GitHub & Binder
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../handy/" class="md-nav__link">
        Handy to have
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../tinyutils/" class="md-nav__link">
        tinyutils
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Links/" class="md-nav__link">
        Links
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../About/" class="md-nav__link">
        About
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#q-ok-i-see-this-and-that-but-really-why-should-i-bother-with-awk" class="md-nav__link">
    Q: OK, I see this and that but really, why should I bother with awk?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#well-coins-countries-anything-else" class="md-nav__link">
    Well, coins, countries - anything else?
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/pmitev/to-awk-or-not/edit/master/docs/3.Shell_we_awk.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="3shell-we-awk">3.Shell we awk!</h1>
<h2 id="q-ok-i-see-this-and-that-but-really-why-should-i-bother-with-awk">Q: OK, I see this and that but really, why should I bother with awk?</h2>
<hr />
<p>Indeed, why? Lets get back to our very first example with the coins.</p>
<div class="highlight"><pre><span></span><code>gold     1    1986  USA                 American Eagle
gold     1    1908  Austria-Hungary     Franz Josef 100 Korona
silver  10    1981  USA                 ingot
gold     1    1984  Switzerland         ingot
gold     1    1979  RSA                 Krugerrand
gold     0.5  1981  RSA                 Krugerrand
gold     0.1  1986  PRC                 Panda
silver   1    1986  USA                 Liberty dollar
gold     0.25 1986  USA                 Liberty 5-dollar piece
silver   0.5  1986  USA                 Liberty 50-cent piece
silver   1    1987  USA                 Constitution dollar
gold     0.25 1987  USA                 Constitution 5-dollar piece
gold     1    1988  Canada              Maple Leaf
</code></pre></div>
<p>Let's, just for a moment, assume that the file contains thousands of lines and your task is to summarize how many coins from each country you have in the file. 
You can do it in some spreadsheet software, you can write a program in C, C++, Fortran, Python, Perl - I know. You can use a helicopter to travel pretty much everywhere, but are you going to use it for a visit to the nearby grocery store? </p>
<p>So, perhaps <strong>grep</strong> + <strong>wc</strong> is a good start. </p>
<div class="highlight"><pre><span></span><code>$ grep USA coins.txt <span class="p">|</span> wc -l
</code></pre></div>
<p>This will give you the number of coins (lines) that have USA in the description. Then you go over all possible countries that are in the file but how many? Do you create a list of all countries and then run a loop over it? Why not give it to awk and use some associative <a href="http://www.gnu.org/software/gawk/manual/gawk.html#Arrays">arrays</a> for this purpose?</p>
<div class="highlight"><pre><span></span><code><span class="c1">#!/usr/bin/awk -f</span>

<span class="p">{</span> <span class="nx">country</span><span class="p">[</span><span class="o">$</span><span class="mi">4</span><span class="p">]</span><span class="o">++</span> <span class="p">}</span>

<span class="nb">END</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">in</span> <span class="nx">country</span><span class="p">)</span> <span class="kr">print</span> <span class="s2">&quot;Country: &quot;</span> <span class="nx">i</span><span class="p">,</span><span class="s2">&quot; count: &quot;</span><span class="p">,</span> <span class="nx">country</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>This is written in a script file, but if you insist here is the one line equivalent.</p>
<div class="highlight"><pre><span></span><code><span class="o">$</span> <span class="nx">awk</span> <span class="s1">&#39;{country[$4]++} END {for (i in country) print &quot;Country: &quot; i,&quot; count: &quot;, country[i]}&#39;</span> <span class="nx">coins</span><span class="p">.</span><span class="nx">txt</span>
</code></pre></div>
<p>Notice that we neither defined the names of the countries nor their number in advance... The only restriction is that the name of the country should be a single word.</p>
<p>So, on every line <code class="highlight"><span class="p">{</span><span class="nx">country</span><span class="p">[</span><span class="o">$</span><span class="mi">4</span><span class="p">]</span><span class="o">++</span><span class="p">}</span></code> will address the element with the value of the 4<sup>th</sup> column in the array country and will be increased by one. No need to declare the array in advance, no need to pre-allocate the size or to dynamically allocate the array... Everything is done behind the scene for your convenience... and the price to pay is... speed. In this particular case (with the thousands line file) the speed is not a problem.</p>
<p>Try it on the small file. Can you change the program so that it will count how many gold and silver coins there are?</p>
<h2 id="well-coins-countries-anything-else">Well, coins, countries - anything else?</h2>
<hr />
<p>Hm, if you work regularly with unformatted text files, like output from some programs, where the numbers are mixed with a complimentary text - then keep reading...       <br />
Let's use the output from the Gaussian code as an example (<em>something from my research</em>).</p>
<p><div class="highlight"><pre><span></span><code>  . . . ( more than 1 000 lines ) . . .
  ---------------------------------------------------------------------
<span class="hll">                      Distance matrix (angstroms):
</span>                      1          2          3          4          5
       1  O    0.000000
       2  H    0.992913   0.000000
       3  H    3.850087   3.157733   0.000000
       4  H    4.103799   3.210799   1.406026   0.000000
<span class="hll">       5  O    4.087160   3.279779   0.698261   1.006866   0.000000
</span>       6  H    7.101652   6.223004   3.619741   3.012387   3.244764
       7  H    7.979064   7.127506   4.766153   4.025437   4.489933
       8  O    7.015923   6.163580   3.781794   3.039570   3.500909
       9  H    6.870878   5.949961   3.670757   3.155240   3.066537
  . . . ( more than 1 000 lines ) . . .
  Hexadecapole moment (field-independent basis, Debye-Ang**3):
   XXXX=          -1559.9870 YYYY=           -328.4544 ZZZZ=          -2862.8389 XXXY=           1310.6681
   XXXZ=           1081.8065 YYYX=            164.5078 YYYZ=           -151.4171 ZZZX=           1196.1568
   ZZZY=           -496.7865 XXYY=          -1121.6127 XXZZ=           -729.7324 YYZZ=           -643.6533
   XXYZ=           -752.0797 YYXZ=            423.6499 ZZXY=            467.3516
   N-N= 2.958297091443D+02 E-N=-1.886329223184D+03  KE= 5.289517204090D+02
<span class="hll">   Counterpoise: corrected energy =    -624.403363077798
</span>   Counterpoise: BSSE energy =       0.003673904967
   Test job not archived.
   1\1\NSC-NEOLITH\SP\RB3LYP\6-31++G(d,p)\H15O8(1-)\X_PAVMI\23-Aug-2012\0
   \\#B3LYP/6-31++G(d,p) Counterpoise=2 Charge SCF=Tight NoSymm\\OH- in H
   2O,std. LJ params. for H2O, MC/QM\\-1,1\O,0,0.,0.,0.\H,0,-0.797387,-0.
  . . . ( more lines ) . . .
</code></pre></div>
The numbers that I am interested in are in bold. There are <strong>71 such pairs</strong> in the whole file. I need them tabulated in simple, two-column file that is easy to read, analyze and plot. Here I will not discuss other solutions. Instead, here is a possible awk solution:</p>
<div class="highlight"><pre><span></span><code><span class="c1">#!/usr/bin/awk -f</span>
<span class="nb">BEGIN</span> <span class="p">{</span> <span class="nx">AU2eV</span><span class="o">=</span> <span class="mf">27.211383</span> <span class="p">}</span>
<span class="sr">/Distance matrix/</span> <span class="p">{</span><span class="kr">getline</span><span class="p">;</span> <span class="kr">getline</span><span class="p">;</span> <span class="kr">getline</span><span class="p">;</span> <span class="kr">getline</span><span class="p">;</span> <span class="kr">getline</span><span class="p">;</span> <span class="kr">getline</span><span class="p">;</span> <span class="nx">rOH</span><span class="o">=</span> <span class="o">$</span><span class="mi">5</span><span class="p">}</span>
<span class="sr">/Counterpoise: corrected energy/</span> <span class="p">{</span> <span class="kr">printf</span> <span class="s2">&quot;%.12f %.6f\n&quot;</span><span class="p">,</span> <span class="nx">rOH</span><span class="p">,</span> <span class="o">$</span><span class="mi">5</span><span class="o">*</span><span class="nx">AU2eV</span> <span class="p">}</span>
</code></pre></div>
<p>Here is the result:
<div class="highlight"><pre><span></span><code>0.698261000000 -16990.879059
0.713262000000 -16991.433745
0.728261000000 -16991.924474
0.743262000000 -16992.357423
0.758261000000 -16992.738040
0.773261000000 -16993.071353
0.788261000000 -16993.361823
0.803261000000 -16993.613474
0.818261000000 -16993.830007
0.833261000000 -16994.014768
0.848261000000 -16994.170777
0.863261000000 -16994.300772
0.878261000000 -16994.407219
0.893261000000 -16994.492381
0.908261000000 -16994.558302
0.923262000000 -16994.606840
0.938262000000 -16994.639689
0.953261000000 -16994.658379
0.968261000000 -16994.664300
0.983261000000 -16994.658709
0.998261000000 -16994.642752
1.013261000000 -16994.617475
1.028261000000 -16994.583831
1.043261000000 -16994.542689
. . .
</code></pre></div></p>
<p><code class="highlight"><span class="nb">BEGIN</span><span class="p">{</span> <span class="nx">AU2eV</span><span class="o">=</span> <span class="mf">27.211383</span> <span class="p">}</span></code> simply defines a conversion factor from atomic units to eV.</p>
<p><code class="highlight"><span class="sr">/Distance matrix/</span><span class="p">{</span><span class="kr">getline</span><span class="p">;</span> <span class="kr">getline</span><span class="p">;</span> <span class="kr">getline</span><span class="p">;</span> <span class="kr">getline</span><span class="p">;</span> <span class="kr">getline</span><span class="p">;</span> <span class="kr">getline</span><span class="p">;</span> <span class="nx">rOH</span><span class="o">=</span> <span class="o">$</span><span class="mi">5</span><span class="p">}</span></code> will match lines with the specified criteria, skip 6 lines, then accumulate the 5<sup>th</sup> column in variable rOH - the distance between an O and an H in the molecule of interest.</p>
<p><code class="highlight"><span class="sr">/Counterpoise: corrected energy/</span> <span class="p">{</span> <span class="kr">printf</span> <span class="s2">&quot;%.12f %.6f\n&quot;</span><span class="p">,</span> <span class="nx">rOH</span><span class="p">,</span> <span class="o">$</span><span class="mi">5</span><span class="o">*</span><span class="nx">AU2eV</span> <span class="p">}</span></code> will match the other interesting line, then prints the collected earlier rOH and corresponding energy converted in eV.</p>
<p>Reading the resulting file is trivial in any programming language or plotting program.</p>
<p>Look at this alternative solution that uses a smart trick to advance 6 lines after the <code class="highlight"><span class="sr">/Distance matrix/</span></code> line </p>
<details><summary>credits to Pavol Bauer, workshop 2017.01.13</summary><div class="highlight"><pre><span></span><code><span class="c1">#!/usr/bin/awk -f</span>
<span class="nb">BEGIN</span> <span class="p">{</span> <span class="nx">AU2eV</span><span class="o">=</span> <span class="mf">27.211383</span> <span class="p">}</span>
<span class="sr">/Distance matrix/</span> <span class="p">{</span><span class="nx">myNR</span><span class="o">=</span><span class="nb">NR</span><span class="p">}</span>
<span class="nb">NR</span><span class="o">==</span><span class="nx">myNR</span><span class="o">+</span><span class="mi">6</span>        <span class="p">{</span><span class="nx">rOH</span><span class="o">=$</span><span class="mi">5</span><span class="p">}</span>
<span class="sr">/Counterpoise: corrected energy/</span> <span class="p">{</span> <span class="kr">printf</span> <span class="s2">&quot;%.12f %.6f\n&quot;</span><span class="p">,</span> <span class="nx">rOH</span><span class="p">,</span> <span class="o">$</span><span class="mi">5</span><span class="o">*</span><span class="nx">AU2eV</span> <span class="p">}</span>
</code></pre></div>
</details>
<p>Other case studies that will be gradually collected for further inspiration.</p>
<div class="admonition example">
<p class="admonition-title">Files</p>
<ul>
<li><a href="../data/gaussian.out">gaussian.out</a></li>
</ul>
</div>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      <a href="https://uppmax.uu.se/" target="_blank" rel="noopener"><img align="right" alt="Uppsala" src="https://pmitev.github.io/to-awk-or-not/images/Uppsala.png" /> </a>
      <a href="https://snic.se/" target="_blank" rel="noopener"><img align="right" alt="SNIC" src="https://pmitev.github.io/to-awk-or-not/images/SNIC.png" /> </a>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.409db549.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.756773cc.min.js"></script>
      
        <script src="../javascripts/config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>