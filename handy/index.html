
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://pmitev.github.io/to-awk-or-not/handy/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.6">
    
    
      
        <title>Handy to have - To awk or not</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.802231af.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#handy-to-have" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="To awk or not" class="md-header__button md-logo" aria-label="To awk or not" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            To awk or not
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Handy to have
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 10a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2m10-3a5 5 0 0 1 5 5 5 5 0 0 1-5 5H7a5 5 0 0 1-5-5 5 5 0 0 1 5-5h10M7 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3h10a3 3 0 0 0 3-3 3 3 0 0 0-3-3H7z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/pmitev/to-awk-or-not/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="To awk or not" class="md-nav__button md-logo" aria-label="To awk or not" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    To awk or not
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/pmitev/to-awk-or-not/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../1.Simple_example/" class="md-nav__link">
        1.Simple examples
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../2.Teasing_with_grep/" class="md-nav__link">
        2.Teasing with grep
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../3.Shell_we_awk/" class="md-nav__link">
        3.Shell we awk
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../4.Brief_commands/" class="md-nav__link">
        4.Brief commands
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../5.String_manipulation/" class="md-nav__link">
        5.String manipulation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../6.One_line_programs/" class="md-nav__link">
        6.One line programs
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Python_vs_awk/" class="md-nav__link">
        Python vs. awk
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      <label class="md-nav__link" for="__nav_9">
        Exercises
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Exercises" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Exercises
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Exercises/Exercises/" class="md-nav__link">
        Warming up
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Exercises/01.Simple_arithmetic/" class="md-nav__link">
        01.Simple arithmetic *
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Exercises/02.Data_extraction/" class="md-nav__link">
        02.Data extraction *
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Exercises/03.Data_extraction/" class="md-nav__link">
        03.Data extraction **
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Exercises/04.Data_manipulation/" class="md-nav__link">
        04.Data manipulation **
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Exercises/05.Easy_tricks/" class="md-nav__link">
        05.Easy tricks *
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Exercises/06.Bioinformaticians_corner/" class="md-nav__link">
        06.Bioinformaticians corner *
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Exercises/Advanced_data_analysis/" class="md-nav__link">
        Advanced data analysis ****
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Exercises/Carpool/" class="md-nav__link">
        Carpool ***
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Exercises/Difficult_data/" class="md-nav__link">
        Difficult to extract data ****
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Exercises/Scrubbing/" class="md-nav__link">
        Scrubbing a web page **
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Exercises/String_manipulation/" class="md-nav__link">
        String manipulation **
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Exercises/awk-json/" class="md-nav__link">
        Awk and json **
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Exercises/Linear_regression/" class="md-nav__link">
        Simple linear regresion ***
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Case_studies/List/" class="md-nav__link">
        = Case Studies =
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      <label class="md-nav__link" for="__nav_11">
        More with awk
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="More with awk" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          More with awk
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../More_awk/User_defined_functions/" class="md-nav__link">
        User defined functions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../More_awk/Command_params/" class="md-nav__link">
        Parameters on the command line
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../More_awk/Input_output/" class="md-nav__link">
        Input/Output to external program
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../More_awk/Running_average/" class="md-nav__link">
        Running averages
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Other/Fixed_size_fields/" class="md-nav__link">
        Fixed size fields
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Other/Backreferences/" class="md-nav__link">
        Backreferences
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://www.gnu.org/software/gawk/manual/html_node/Multiple-Line.html" class="md-nav__link">
        Multi-Line records
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../arrays/" class="md-nav__link">
        Awk arrays
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../awk_bash/" class="md-nav__link">
        Awk or Bash
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Other/Localization/" class="md-nav__link">
        Localization problems
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="http://www.thegeekstuff.com/2011/06/awk-nawk-gawk/" class="md-nav__link">
        Awk vs. nawk vs. gawk
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Other/Binder/" class="md-nav__link">
        GitHub & Binder
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Handy to have
      </a>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../tinyutils/" class="md-nav__link">
        tinyutils
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Links/" class="md-nav__link">
        Links
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../About/" class="md-nav__link">
        About
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/pmitev/to-awk-or-not/edit/master/docs/handy.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="handy-to-have">Handy to have</h1>
<p><a href="http://xavi.ivars.me/arxius/manuals/awk/awkcard.pdf">Awk reference card</a> (.pdf)</p>
<p>Here are some functions that are missing in awk and might come in handy to have... 
The functions have been collected from different sources or written by myself, so always make sure that they work as expected. Please, do not assume that they are always correct!</p>
<p>For more complete and up to date list with various functions, look here: <a href="http://rosettacode.org/wiki/Category:AWK">http://rosettacode.org/wiki/Category:AWK</a></p>
<div class="highlight"><pre><span></span><code><span class="c1">#==============================================</span>
<span class="nb">BEGIN</span> <span class="p">{</span>
  <span class="nx">pi</span><span class="o">=</span><span class="mf">3.14159265358979</span><span class="p">;</span>
  <span class="nx">rad2deg</span><span class="o">=</span><span class="mi">180</span><span class="p">.</span><span class="o">/</span><span class="nx">pi</span>
  <span class="nx">Q</span> <span class="o">=</span> <span class="s2">&quot;\&quot;&quot;</span><span class="p">;</span>
   <span class="nx">_</span> <span class="o">=</span> <span class="nb">SUBSEP</span><span class="p">;</span>
  <span class="nx">Inf</span>    <span class="o">=</span> <span class="mf">1.99999</span><span class="o">*</span><span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="p">(</span><span class="mi">127</span><span class="p">));</span>
  <span class="nx">NegInf</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="mi">2</span><span class="o">**</span><span class="p">(</span><span class="mi">126</span><span class="p">);</span>
  <span class="nx">White</span><span class="o">=</span><span class="s2">&quot;^[ \t\n\r]*$&quot;</span><span class="p">;</span>
  <span class="nx">Number</span><span class="o">=</span><span class="s2">&quot;^[+-]?([0-9]+[.]?[0-9]*|[.][0-9]+)([eE][+-]?[0-9]+)?$&quot;</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">#==============================================</span>

<span class="kd">function</span> <span class="nx">asin</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="kr">atan2</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="kr">sqrt</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="nx">a</span><span class="o">*</span><span class="nx">a</span><span class="p">))</span> <span class="p">}</span>
<span class="kd">function</span> <span class="nx">acos</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">pi</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="nx">asin</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">}</span>
<span class="kd">function</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>  <span class="p">{</span> <span class="k">return</span> <span class="p">(</span><span class="nx">x</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="err">?</span> <span class="nx">x</span> <span class="err">:</span> <span class="o">-</span><span class="nx">x</span> <span class="p">}</span>
<span class="kd">function</span> <span class="nx">sgn</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>  <span class="p">{</span> <span class="k">return</span> <span class="p">(</span><span class="nx">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="err">?</span> <span class="mi">0</span> <span class="err">:</span> <span class="p">(</span> <span class="p">(</span><span class="nx">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="err">?</span> <span class="mi">1</span> <span class="err">:</span> <span class="o">-</span><span class="mi">1</span>  <span class="p">)</span> <span class="p">}</span>
<span class="kd">function</span> <span class="nx">coth</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>  <span class="nx">exp2x</span><span class="o">=</span><span class="kr">exp</span><span class="p">(</span><span class="mf">2.0</span><span class="o">*</span><span class="nx">x</span><span class="p">);</span>  <span class="k">return</span> <span class="p">(</span><span class="nx">exp2x</span> <span class="o">+</span> <span class="mf">1.0</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="nx">exp2x</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">)</span> <span class="p">}</span>

<span class="c1">#vectors</span>
<span class="kd">function</span> <span class="nx">norm</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="p">(</span><span class="kr">sqrt</span><span class="p">(</span><span class="nx">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="nx">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="nx">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="nx">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">+</span><span class="nx">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">*</span><span class="nx">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]));}</span>
<span class="kd">function</span> <span class="nx">dotprod</span> <span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="p">(</span> <span class="nx">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="nx">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nx">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="nx">y</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="nx">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">*</span><span class="nx">y</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="p">);}</span>
<span class="kd">function</span> <span class="nx">angle</span> <span class="p">(</span><span class="nx">v1</span><span class="p">,</span><span class="nx">v2</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">myacos</span> <span class="o">=</span> <span class="nx">dotprod</span><span class="p">(</span><span class="nx">v1</span><span class="p">,</span><span class="nx">v2</span><span class="p">)</span><span class="o">/</span><span class="nx">norm</span><span class="p">(</span><span class="nx">v1</span><span class="p">)</span><span class="o">/</span><span class="nx">norm</span><span class="p">(</span><span class="nx">v2</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">myacos</span><span class="o">&gt;</span> <span class="mf">1.0</span><span class="p">)</span> <span class="nx">myacos</span> <span class="o">=</span>  <span class="mf">1.0</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">myacos</span><span class="o">&lt;-</span><span class="mf">1.0</span><span class="p">)</span> <span class="nx">myacos</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">;</span>
  <span class="k">return</span><span class="p">(</span><span class="nx">acos</span><span class="p">(</span><span class="nx">myacos</span><span class="p">)</span><span class="o">*</span><span class="mf">180.0</span><span class="o">/</span><span class="nx">pi</span><span class="p">);</span>
<span class="p">}</span>



<span class="c1"># Printing</span>

<span class="kd">function</span> <span class="nx">barph</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span><span class="kr">print</span> <span class="nx">str</span><span class="o">&gt;</span><span class="s2">&quot;/dev/tty&quot;</span><span class="p">}</span>
<span class="kd">function</span> <span class="nx">die</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span>   <span class="p">{</span><span class="nx">barph</span><span class="p">(</span><span class="nx">str</span><span class="p">);</span> <span class="k">exit</span> <span class="mi">1</span><span class="p">}</span>

<span class="c1"># Arrays</span>
<span class="c1"># These array store the size of the array in position C&lt;Array[0]&gt;.</span>

<span class="kd">function</span> <span class="nx">top</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">a</span><span class="p">[</span><span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]]}</span>
<span class="kd">function</span> <span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">x</span><span class="p">,</span>  <span class="nx">i</span><span class="p">)</span> <span class="p">{</span><span class="nx">i</span><span class="o">=++</span><span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span> <span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="o">=</span><span class="nx">x</span><span class="p">;</span> <span class="k">return</span> <span class="nx">i</span><span class="p">}</span>
<span class="kd">function</span> <span class="nx">push2</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">,</span>  <span class="nx">i</span><span class="p">)</span> <span class="p">{</span><span class="nx">i</span><span class="o">=++</span><span class="nx">a</span><span class="p">[</span><span class="nx">x</span><span class="p">,</span><span class="mi">0</span><span class="p">];</span> <span class="nx">a</span><span class="p">[</span><span class="nx">x</span><span class="p">,</span><span class="nx">i</span><span class="p">]</span><span class="o">=</span><span class="nx">y</span><span class="p">;</span> <span class="k">return</span> <span class="nx">i</span><span class="p">}</span>
<span class="kd">function</span> <span class="nx">pop</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span>   <span class="nx">x</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
 <span class="nx">i</span><span class="o">=</span><span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">--</span><span class="p">;</span>
 <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="p">}</span> <span class="k">else</span> <span class="p">{</span><span class="nx">x</span><span class="o">=</span><span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span> <span class="kr">delete</span> <span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span> <span class="k">return</span> <span class="nx">x</span><span class="p">}</span>
<span class="p">}</span>


<span class="c1"># Arrays to strings</span>

<span class="kd">function</span> <span class="nx">saya</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span><span class="kr">print</span> <span class="nx">s</span><span class="p">;</span> <span class="kr">print</span> <span class="nx">a2s</span><span class="p">(</span><span class="nx">a</span><span class="p">)}</span>
<span class="kd">function</span> <span class="nx">a2s</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span>  <span class="nx">n</span><span class="p">,</span><span class="nx">pre</span><span class="p">,</span><span class="nx">i</span><span class="p">,</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span><span class="p">(</span><span class="nx">i</span> <span class="o">in</span> <span class="nx">a</span><span class="p">)</span> <span class="nx">str</span><span class="o">=</span> <span class="nx">str</span> <span class="nx">pre</span> <span class="s2">&quot;[&quot;</span> <span class="nx">i</span> <span class="s2">&quot;]=[&quot;</span> <span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="s2">&quot;]\n&quot;</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">str</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1"># Strings</span>

<span class="kd">function</span> <span class="nx">number</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>    <span class="p">{</span> <span class="k">return</span> <span class="nx">x</span> <span class="o">~</span>  <span class="nx">Number</span>  <span class="p">}</span>
<span class="kd">function</span> <span class="nx">symbol</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>    <span class="p">{</span> <span class="k">return</span> <span class="o">!</span> <span class="nx">number</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>  <span class="p">}</span>
<span class="kd">function</span> <span class="nx">blank</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>     <span class="p">{</span> <span class="k">return</span> <span class="nx">x</span><span class="o">~</span><span class="sr">/^[ \t]*$/</span> <span class="p">}</span>
<span class="kd">function</span> <span class="nx">trimLeft</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>  <span class="p">{</span> <span class="kr">sub</span><span class="p">(</span><span class="sr">/^[ \t]*/</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">x</span><span class="p">);</span> <span class="k">return</span> <span class="nx">x</span><span class="p">}</span>
<span class="kd">function</span> <span class="nx">trimRight</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="kr">sub</span><span class="p">(</span><span class="sr">/[ \t]*$/</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">x</span><span class="p">);</span> <span class="k">return</span> <span class="nx">x</span><span class="p">}</span>
<span class="kd">function</span> <span class="nx">trim</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span>   <span class="p">{</span> <span class="k">return</span> <span class="nx">trimRight</span><span class="p">(</span><span class="nx">trimLeft</span><span class="p">(</span><span class="nx">x</span><span class="p">))}</span>
<span class="kd">function</span> <span class="nx">str2keys</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span><span class="nx">keys</span><span class="p">,</span><span class="nx">sep</span><span class="p">,</span>   <span class="nx">n</span><span class="p">,</span><span class="nx">i</span><span class="p">,</span><span class="nx">tmp</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">n</span><span class="o">=</span><span class="kr">split</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span><span class="nx">tmp</span><span class="p">,</span><span class="nx">sep</span><span class="p">);</span>
  <span class="k">for</span><span class="p">(</span><span class="nx">i</span> <span class="o">in</span> <span class="nx">tmp</span><span class="p">)</span> <span class="nx">keys</span><span class="p">[</span><span class="nx">tmp</span><span class="p">[</span><span class="nx">i</span><span class="p">]];</span>
  <span class="nx">keys</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="nx">n</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">pairs2nums</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span><span class="nx">pairs</span><span class="p">,</span><span class="nx">sep</span><span class="p">,</span> <span class="nx">n</span><span class="p">,</span><span class="nx">i</span><span class="p">,</span><span class="nx">tmp</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">n</span><span class="o">=</span><span class="kr">split</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span><span class="nx">tmp</span><span class="p">,</span><span class="nx">sep</span><span class="p">);</span>
  <span class="k">for</span><span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;=</span><span class="nx">n</span><span class="p">;</span><span class="nx">i</span><span class="o">=</span><span class="nx">i</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">paris</span><span class="p">[</span><span class="nx">tmp</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span><span class="o">=</span><span class="nx">tmp</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="mi">0</span><span class="p">;</span>
    <span class="nx">pairs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1"># Numbers</span>

<span class="kd">function</span> <span class="nx">odd</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>     <span class="p">{</span><span class="k">return</span> <span class="nx">x</span> <span class="o">%</span> <span class="mi">2</span><span class="p">}</span>
<span class="kd">function</span> <span class="nx">even</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>    <span class="p">{</span><span class="k">return</span> <span class="o">!</span> <span class="nx">odd</span><span class="p">(</span><span class="nx">x</span><span class="p">)}</span>
<span class="kd">function</span> <span class="nx">most</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">)</span>  <span class="p">{</span> <span class="k">if</span> <span class="p">(</span><span class="nx">x</span><span class="o">&gt;</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">x</span><span class="p">}</span> <span class="k">else</span> <span class="p">{</span><span class="k">return</span> <span class="nx">y</span><span class="p">}}</span>
<span class="kd">function</span> <span class="nx">least</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span> <span class="k">if</span> <span class="p">(</span><span class="nx">x</span><span class="o">&lt;</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">x</span><span class="p">}</span> <span class="k">else</span> <span class="p">{</span><span class="k">return</span> <span class="nx">y</span><span class="p">}}</span>
<span class="kd">function</span> <span class="nx">round</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>   <span class="p">{</span> <span class="k">if</span> <span class="p">(</span><span class="nx">x</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="kr">int</span><span class="p">(</span><span class="nx">x</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)}</span> <span class="k">else</span> <span class="p">{</span><span class="k">return</span> <span class="kr">int</span><span class="p">(</span><span class="nx">x</span><span class="o">+</span><span class="mf">0.5</span><span class="p">)}}</span>
<span class="kd">function</span> <span class="nx">between</span><span class="p">(</span><span class="nx">min</span><span class="p">,</span><span class="nx">max</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">if</span> <span class="p">(</span><span class="nx">max</span><span class="o">==</span><span class="nx">min</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">min</span><span class="p">}</span>
   <span class="k">else</span> <span class="p">{</span><span class="k">return</span> <span class="nx">min</span><span class="o">+</span> <span class="p">((</span><span class="nx">max</span><span class="o">-</span><span class="nx">min</span><span class="p">)</span><span class="o">*</span><span class="kr">rand</span><span class="p">())}}</span>
<span class="kd">function</span> <span class="nx">mean</span><span class="p">(</span><span class="nx">sumX</span><span class="p">,</span><span class="nx">n</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">sumX</span><span class="o">/</span><span class="nx">n</span><span class="p">}</span>
<span class="kd">function</span> <span class="nx">sd</span><span class="p">(</span><span class="nx">sumSq</span><span class="p">,</span><span class="nx">sumX</span><span class="p">,</span><span class="nx">n</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="kr">sqrt</span><span class="p">((</span><span class="nx">sumSq</span><span class="o">-</span><span class="p">((</span><span class="nx">sumX</span><span class="o">*</span><span class="nx">sumX</span><span class="p">)</span><span class="o">/</span><span class="nx">n</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="nx">n</span><span class="o">-</span><span class="mi">1</span><span class="p">))}</span>


<span class="c1">#File exists</span>

<span class="kd">function</span> <span class="nx">exists</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">dummy</span><span class="p">,</span> <span class="nx">ret</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">ret</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="kr">getline</span> <span class="nx">dummy</span> <span class="o">&lt;</span> <span class="nx">file</span><span class="p">)</span> <span class="o">&gt;=</span><span class="mi">0</span> <span class="p">)</span> <span class="p">{</span><span class="nx">ret</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="kr">close</span><span class="p">(</span><span class="nx">file</span><span class="p">)};</span>
  <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1"># rewind.awk --- rewind the current file and start over</span>
<span class="kd">function</span> <span class="nx">rewind</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1"># shift remaining arguments up</span>
    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="nb">ARGC</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&gt;</span> <span class="nb">ARGIND</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">)</span>
        <span class="nb">ARGV</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">ARGV</span><span class="p">[</span><span class="nx">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="c1"># make sure gawk knows to keep going</span>
    <span class="nb">ARGC</span><span class="o">++</span>

    <span class="c1"># make current file next to get done</span>
    <span class="nb">ARGV</span><span class="p">[</span><span class="nb">ARGIND</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">FILENAME</span>

    <span class="c1"># do it</span>
    <span class="kr">nextfile</span>
<span class="p">}</span>
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      <a href="https://uppmax.uu.se/" target="_blank" rel="noopener"><img align="right" alt="Uppsala" src="https://pmitev.github.io/to-awk-or-not/images/Uppsala.png" /> </a>
      <a href="https://snic.se/" target="_blank" rel="noopener"><img align="right" alt="SNIC" src="https://pmitev.github.io/to-awk-or-not/images/SNIC.png" /> </a>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.409db549.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.756773cc.min.js"></script>
      
        <script src="../javascripts/config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>